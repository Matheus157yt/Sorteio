<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteio - 100 N√∫meros</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
        }
        .container {
            background-color: #2d2d2d;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            width: 340px;
        }
        h2 {
            text-align: center;
            margin-bottom: 25px;
            color: #FFA500;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #f0f0f0;
        }
        input[type="text"],
        input[type="tel"],
        input[type="number"] {
            width: 100%;
            padding: 10px;
            background-color: #444;
            border: 1px solid #666;
            border-radius: 4px;
            box-sizing: border-box;
            color: #ffffff;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #FFA500;
            color: #121212;
            font-weight: bold;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        button:hover {
            background-color: #E69500;
        }
        .message {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
            display: none;
        }
        .success {
            color: #90EE90;
        }
        .error {
            color: #FF6347;
        }
        /* --- NOVO ESTILO --- */
        .unavailable-numbers {
            margin-top: 20px;
            padding: 10px;
            background-color: #333;
            border-radius: 4px;
            border: 1px solid #555;
        }
        .unavailable-numbers h4 {
            margin: 0 0 8px 0;
            color: #FFA500;
            font-size: 14px;
            text-align: center;
        }
        #unavailable-list {
            font-size: 14px;
            color: #ccc;
            word-wrap: break-word;
            text-align: center;
            line-height: 1.5;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>Cadastro para o Sorteio</h2>
        <form id="raffle-form">
            <div class="form-group">
                <label for="full-name">Nome Completo:</label>
                <input type="text" id="full-name" name="full-name" required>
            </div>
            <div class="form-group">
                <label for="phone">N√∫mero de Telefone:</label>
                <input type="tel" id="phone" name="phone" placeholder="(XX) XXXXX-XXXX" required>
            </div>
            <div class="form-group">
                <label for="raffle-number">Digite seu N√∫mero (1 a 100):</label>
                <!-- --- CAMPO ALTERADO --- -->
                <input type="number" id="raffle-number" name="raffle-number" min="1" max="100" required>
            </div>
            <button type="submit">Cadastrar e Enviar via WhatsApp</button>
            <p id="message-box" class="message"></p>
        </form>
        
        <!-- --- NOVA SE√á√ÉO --- -->
        <div class="unavailable-numbers">
            <h4>N√∫meros Indispon√≠veis</h4>
            <p id="unavailable-list">Nenhum n√∫mero escolhido ainda.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const totalNumbers = 100;
            const form = document.getElementById('raffle-form');
            const messageBox = document.getElementById('message-box');
            const raffleNumberInput = document.getElementById('raffle-number');
            const unavailableList = document.getElementById('unavailable-list');

            // Fun√ß√£o para buscar os n√∫meros j√° escolhidos do localStorage
            function getChosenNumbers() {
                const numbers = localStorage.getItem('chosenRaffleNumbers');
                return numbers ? JSON.parse(numbers) : [];
            }

            // Fun√ß√£o para salvar um novo n√∫mero escolhido no localStorage
            function saveChosenNumber(number) {
                const numbers = getChosenNumbers();
                if (!numbers.includes(number)) {
                    numbers.push(number);
                    localStorage.setItem('chosenRaffleNumbers', JSON.stringify(numbers));
                }
            }
            
            // --- NOVA FUN√á√ÉO ---
            // Fun√ß√£o para exibir os n√∫meros indispon√≠veis na tela
            function displayUnavailableNumbers() {
                const chosenNumbers = getChosenNumbers();
                if (chosenNumbers.length === 0) {
                    unavailableList.textContent = 'Nenhum n√∫mero escolhido ainda.';
                } else {
                    // Ordena os n√∫meros para melhor visualiza√ß√£o
                    chosenNumbers.sort((a, b) => a - b);
                    unavailableList.textContent = chosenNumbers.join(', ');
                }
            }

            // Exibe os n√∫meros indispon√≠veis assim que a p√°gina carrega
            displayUnavailableNumbers();

            form.addEventListener('submit', function(event) {
                event.preventDefault();
                messageBox.style.display = 'none';

                // Garante que a lista est√° atualizada com o localStorage
                const chosenNumbers = getChosenNumbers();

                const fullName = document.getElementById('full-name').value;
                const phone = document.getElementById('phone').value;
                const selectedNumber = parseInt(raffleNumberInput.value, 10);

                // --- NOVAS VALIDA√á√ïES ---
                if (isNaN(selectedNumber) || selectedNumber < 1 || selectedNumber > totalNumbers) {
                    messageBox.textContent = `Por favor, digite um n√∫mero v√°lido entre 1 e ${totalNumbers}.`;
                    messageBox.className = 'message error';
                    messageBox.style.display = 'block';
                    return;
                }

                if (chosenNumbers.includes(selectedNumber)) {
                    messageBox.textContent = `Ops! O n√∫mero ${selectedNumber} j√° foi escolhido. Tente outro.`;
                    messageBox.className = 'message error';
                    messageBox.style.display = 'block';
                    raffleNumberInput.value = ''; // Limpa o campo para nova tentativa
                    return;
                }
                
                // Salva o n√∫mero no localStorage
                saveChosenNumber(selectedNumber);

                messageBox.textContent = `N√∫mero ${selectedNumber} reservado com sucesso!`;
                messageBox.className = 'message success';
                messageBox.style.display = 'block';

                const whatsappNumber = "+556196312873";
                const message = `üéâ *Reserva para o Sorteio* üéâ\n\nOl√°! Acabei de fazer minha reserva. Seguem os meus dados:\n\nüë§ *Nome:* ${fullName}\nüìû *Telefone:* ${phone}\nüéüÔ∏è *N√∫mero da Sorte:* *${selectedNumber}*\n\nEstou na torcida! ü§û`;
                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;

                window.open(whatsappUrl, '_blank');
                
                // Limpa o formul√°rio e atualiza a lista de n√∫meros indispon√≠veis
                form.reset();
                displayUnavailableNumbers();
            });
        });
    </script>

</body>
</html>